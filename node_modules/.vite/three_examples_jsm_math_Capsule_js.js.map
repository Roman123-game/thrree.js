{
  "version": 3,
  "sources": ["../three/examples/jsm/math/Capsule.js"],
  "sourcesContent": ["import {\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _v1 = new Vector3();\r\nconst _v2 = new Vector3();\r\nconst _v3 = new Vector3();\r\n\r\nconst EPS = 1e-10;\r\n\r\nclass Capsule {\r\n\r\n\tconstructor( start = new Vector3( 0, 0, 0 ), end = new Vector3( 0, 1, 0 ), radius = 1 ) {\r\n\r\n\t\tthis.start = start;\r\n\t\tthis.end = end;\r\n\t\tthis.radius = radius;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new Capsule( this.start.clone(), this.end.clone(), this.radius );\r\n\r\n\t}\r\n\r\n\tset( start, end, radius ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\t\tthis.radius = radius;\r\n\r\n\t}\r\n\r\n\tcopy( capsule ) {\r\n\r\n\t\tthis.start.copy( capsule.start );\r\n\t\tthis.end.copy( capsule.end );\r\n\t\tthis.radius = capsule.radius;\r\n\r\n\t}\r\n\r\n\tgetCenter( target ) {\r\n\r\n\t\treturn target.copy( this.end ).add( this.start ).multiplyScalar( 0.5 );\r\n\r\n\t}\r\n\r\n\ttranslate( v ) {\r\n\r\n\t\tthis.start.add( v );\r\n\t\tthis.end.add( v );\r\n\r\n\t}\r\n\r\n\tcheckAABBAxis( p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius ) {\r\n\r\n\t\treturn (\r\n\t\t\t( minx - p1x < radius || minx - p2x < radius ) &&\r\n\t\t\t( p1x - maxx < radius || p2x - maxx < radius ) &&\r\n\t\t\t( miny - p1y < radius || miny - p2y < radius ) &&\r\n\t\t\t( p1y - maxy < radius || p2y - maxy < radius )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tintersectsBox( box ) {\r\n\r\n\t\treturn (\r\n\t\t\tthis.checkAABBAxis(\r\n\t\t\t\tthis.start.x, this.start.y, this.end.x, this.end.y,\r\n\t\t\t\tbox.min.x, box.max.x, box.min.y, box.max.y,\r\n\t\t\t\tthis.radius ) &&\r\n\t\t\tthis.checkAABBAxis(\r\n\t\t\t\tthis.start.x, this.start.z, this.end.x, this.end.z,\r\n\t\t\t\tbox.min.x, box.max.x, box.min.z, box.max.z,\r\n\t\t\t\tthis.radius ) &&\r\n\t\t\tthis.checkAABBAxis(\r\n\t\t\t\tthis.start.y, this.start.z, this.end.y, this.end.z,\r\n\t\t\t\tbox.min.y, box.max.y, box.min.z, box.max.z,\r\n\t\t\t\tthis.radius )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tlineLineMinimumPoints( line1, line2 ) {\r\n\r\n\t\tconst r = _v1.copy( line1.end ).sub( line1.start );\r\n\t\tconst s = _v2.copy( line2.end ).sub( line2.start );\r\n\t\tconst w = _v3.copy( line2.start ).sub( line1.start );\r\n\r\n\t\tconst a = r.dot( s ),\r\n\t\t\tb = r.dot( r ),\r\n\t\t\tc = s.dot( s ),\r\n\t\t\td = s.dot( w ),\r\n\t\t\te = r.dot( w );\r\n\r\n\t\tlet t1, t2;\r\n\t\tconst divisor = b * c - a * a;\r\n\r\n\t\tif ( Math.abs( divisor ) < EPS ) {\r\n\r\n\t\t\tconst d1 = - d / c;\r\n\t\t\tconst d2 = ( a - d ) / c;\r\n\r\n\t\t\tif ( Math.abs( d1 - 0.5 ) < Math.abs( d2 - 0.5 ) ) {\r\n\r\n\t\t\t\tt1 = 0;\r\n\t\t\t\tt2 = d1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tt1 = 1;\r\n\t\t\t\tt2 = d2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tt1 = ( d * a + e * c ) / divisor;\r\n\t\t\tt2 = ( t1 * a - d ) / c;\r\n\r\n\t\t}\r\n\r\n\t\tt2 = Math.max( 0, Math.min( 1, t2 ) );\r\n\t\tt1 = Math.max( 0, Math.min( 1, t1 ) );\r\n\r\n\t\tconst point1 = r.multiplyScalar( t1 ).add( line1.start );\r\n\t\tconst point2 = s.multiplyScalar( t2 ).add( line2.start );\r\n\r\n\t\treturn [ point1, point2 ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { Capsule };\r\n"],
  "mappings": "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",
  "names": []
}
